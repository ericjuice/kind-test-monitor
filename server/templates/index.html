<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <title>Juice</title>
</head>

<body class="flex flex-col min-h-screen">
    <div class="p-4 h-1/6 m-5 border border-red text-center rounded-lg">
        <h2 class="text-2xl font-bold mb-4 ">
            Test & Monitor
        </h2>

        <p class="text-gray-700 mb-4 ">
            Note:
            {% if note_info %}
            {{ note_info }}</p>
        {% else %}
        Nothing</p>
        {% endif %}
    </div>
    </div>

    <div class="flex p-4 h-3/6 m-5 border rounded-lg">
        <!-- Left -->
        <div class="w-1/2 p-4 ">
            <form class="mb-4" method="post">
                
                <label for="command" class="my-1">
                    <i class="fa-solid fa-vial-virus"></i>
                    Testing:
                </label>
                <div class="flex">
                    <input type="text" id="exec_test_command"
                    class="w-full my-1 mx-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                    placeholder="Enter a command" required>
                    <button class="my-1 mx-1 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600" type="submit"
                    onclick="submitExecForm(event)">Submit</button>
                </div>
            </form>
            <div class="border rounded" >
                <p class="m-1" id="exec_cmd_result">
                    Result
                </p>
            </div>
        </div>
        <!-- Right -->
        <div class="w-1/2 p-4 flex flex-wrap border rounded-lg">
            <div class="w-1/3 p-2">
                <img src="static/pic.png" alt="结果1" class="w-full h-auto">
            </div>
            <div class="w-1/3 p-2">
                <img src="static/pic.png" alt="结果2" class="w-full h-auto">
            </div>
            <div class="w-1/3 p-2">
                <img src="static/pic.png" alt="结果3" class="w-full h-auto">
            </div>
        </div>
    </div>

    <div class="flex p-4 h-2/6 m-5 border rounded-lg">
        <!-- Left -->
        <div class="w-1/2 p-4 ">
            <form class="mb-4" method="post">
                
                <label for="command" class="my-1">
                    <i class="fa-solid fa-terminal"></i>
                    Command exec:
                </label>
                <div class="flex">
                    <input type="text" id="exec_command"
                    class="w-full my-1 mx-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                    placeholder="Enter a command" required>
                    <button class="my-1 mx-1 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600" type="submit"
                    onclick="submitExecForm(event)">Submit</button>
                </div>
            </form>
        </div>
        <!-- Right -->
        <div class="w-1/2 p-4 flex flex-wrap border rounded-lg">
            <div class="" >
                <p class="m-1 w-full" id="exec_cmd_result">
                    Result
                </p>
            </div>
        </div>
    </div>
    </div>
</body>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/js/all.min.js"></script>
<script>
    // exec all cmd on host
    function submitExecForm(event) {
        event.preventDefault();
        var command = $("#exec_command").val();
        $.ajax({
            url: "/exec_cmd_by_post",
            type: "POST",
            data: { command: command },
            success: function (response) {
                $("#exec_cmd_result").html(response.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\n/g, '<br>'));
                // console.log(response);
            },
            error: function (error) {
                $("#exec_cmd_result").html(error);
                // console.log(error);
            }
        });
    }
</script>

</html>